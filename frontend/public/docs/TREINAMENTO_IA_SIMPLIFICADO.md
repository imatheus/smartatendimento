# Treinamento do Agente IA - Vers√£o Simplificada

## üö® ESPECIFICA√á√ÉO FINAL SIMPLIFICADA

### Localiza√ß√£o: Bot√£o "Treinar IA" em "Minhas Conex√µes"
- **Onde:** Ao lado de cada conex√£o WhatsApp
- **Bot√£o:** "Treinar IA" ou √≠cone üéì
- **Fun√ß√£o:** Abre modal simples de treinamento

## üìã Modal de Treinamento SIMPLIFICADO

### Formul√°rio √önico - Informa√ß√µes da Empresa
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üéì Treinar IA - WhatsApp Empresa ABC       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                             ‚îÇ
‚îÇ Nome da Empresa: [________________]         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ Tipo de Neg√≥cio: [Dropdown ‚ñº]              ‚îÇ
‚îÇ ‚îú Loja/Varejo                              ‚îÇ
‚îÇ ‚îú Restaurante                              ‚îÇ
‚îÇ ‚îú Oficina/Automotivo                       ‚îÇ
‚îÇ ‚îú Beleza/Est√©tica                          ‚îÇ
‚îÇ ‚îú Servi√ßos                                 ‚îÇ
‚îÇ ‚îî Outros                                   ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ Descri√ß√£o dos Produtos/Servi√ßos:           ‚îÇ
‚îÇ [________________________________]         ‚îÇ
‚îÇ [________________________________]         ‚îÇ
‚îÇ [________________________________]         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ Hor√°rio de Funcionamento:                  ‚îÇ
‚îÇ [________________________________]         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ Informa√ß√µes de Contato:                    ‚îÇ
‚îÇ [________________________________]         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ Endere√ßo:                                  ‚îÇ
‚îÇ [________________________________]         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ Site da Empresa (opcional):                ‚îÇ
‚îÇ [________________________________]         ‚îÇ
‚îÇ                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    [Cancelar] [Treinar/Concluir] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ Comportamento do Bot√£o "Treinar/Concluir"

### Ao clicar em "Treinar/Concluir":
1. **Salva as informa√ß√µes** no banco de dados
2. **Ativa automaticamente o PEPE** para essa conex√£o
3. **Fecha o modal**
4. **Mostra notifica√ß√£o:** "PEPE ativado com sucesso!"
5. **Bot√£o muda para:** "IA Ativa ‚úÖ" ou "Editar Treinamento"

## ‚ùå O QUE N√ÉO TER√Å (Removido da Especifica√ß√£o)

### üîß Configura√ß√µes B√°sicas (REMOVIDO)
- ~~Ativar/Desativar PEPE~~ ‚Üí Ativa√ß√£o autom√°tica
- ~~Sele√ß√£o de modelo de IA~~ ‚Üí DeepSeek fixo
- ~~Configura√ß√£o de temperatura~~ ‚Üí Padr√£o fixo

### üìö Treinamento Avan√ßado (REMOVIDO)
- ~~Perguntas e respostas customizadas~~ ‚Üí Apenas info da empresa
- ~~Extra√ß√£o autom√°tica do site~~ ‚Üí Apenas URL opcional

### ‚öôÔ∏è Controles Avan√ßados (REMOVIDO)
- ~~Regras de transfer√™ncia~~ ‚Üí Regras padr√£o fixas
- ~~Teste do agente~~ ‚Üí Sem teste manual
- ~~Monitoramento de uso~~ ‚Üí Sem dashboard

## ü§ñ Configura√ß√£o T√©cnica Simplificada

### API de IA
- **Modelo Fixo:** DeepSeek (100% gratuito)
- **Sem OpenRouter inicialmente**
- **Configura√ß√µes padr√£o fixas**

### Banco de Dados Vetorial
- **Banco pr√≥prio:** PostgreSQL + pgvector
- **Sem Pinecone ou servi√ßos externos**
- **Embeddings locais**

### Estrutura do Banco
```sql
-- Tabela simplificada para treinamento
CREATE TABLE ai_training_simple (
  id SERIAL PRIMARY KEY,
  whatsapp_id INTEGER REFERENCES whatsapps(id),
  company_id INTEGER REFERENCES companies(id),
  company_name VARCHAR(255),
  business_type VARCHAR(100),
  description TEXT,
  working_hours VARCHAR(255),
  contact_info TEXT,
  address TEXT,
  website_url VARCHAR(500),
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Embeddings no pr√≥prio PostgreSQL
CREATE TABLE ai_embeddings_local (
  id SERIAL PRIMARY KEY,
  training_id INTEGER REFERENCES ai_training_simple(id),
  content_text TEXT,
  embedding VECTOR(384), -- Modelo local menor
  created_at TIMESTAMP DEFAULT NOW()
);
```

## üíª Implementa√ß√£o Frontend Simplificada

```typescript
// Componente do modal simplificado
const SimpleTrainingModal = ({ connectionId, onClose }) => {
  const [formData, setFormData] = useState({
    companyName: '',
    businessType: '',
    description: '',
    workingHours: '',
    contactInfo: '',
    address: '',
    websiteUrl: ''
  });

  const handleSubmit = async () => {
    try {
      // Salva dados e ativa PEPE automaticamente
      await api.post(`/ai-training/simple/${connectionId}`, formData);
      
      // Notifica√ß√£o de sucesso
      toast.success('PEPE ativado com sucesso!');
      
      // Fecha modal
      onClose();
      
      // Atualiza lista de conex√µes
      refreshConnections();
    } catch (error) {
      toast.error('Erro ao ativar PEPE');
    }
  };

  return (
    <Modal>
      <h2>üéì Treinar IA</h2>
      
      <form>
        <input 
          placeholder="Nome da Empresa"
          value={formData.companyName}
          onChange={(e) => setFormData({...formData, companyName: e.target.value})}
        />
        
        <select 
          value={formData.businessType}
          onChange={(e) => setFormData({...formData, businessType: e.target.value})}
        >
          <option value="">Selecione o tipo de neg√≥cio</option>
          <option value="retail">Loja/Varejo</option>
          <option value="restaurant">Restaurante</option>
          <option value="automotive">Oficina/Automotivo</option>
          <option value="beauty">Beleza/Est√©tica</option>
          <option value="services">Servi√ßos</option>
          <option value="other">Outros</option>
        </select>
        
        <textarea 
          placeholder="Descri√ß√£o dos produtos/servi√ßos"
          value={formData.description}
          onChange={(e) => setFormData({...formData, description: e.target.value})}
        />
        
        <input 
          placeholder="Hor√°rio de funcionamento"
          value={formData.workingHours}
          onChange={(e) => setFormData({...formData, workingHours: e.target.value})}
        />
        
        <textarea 
          placeholder="Informa√ß√µes de contato"
          value={formData.contactInfo}
          onChange={(e) => setFormData({...formData, contactInfo: e.target.value})}
        />
        
        <input 
          placeholder="Endere√ßo"
          value={formData.address}
          onChange={(e) => setFormData({...formData, address: e.target.value})}
        />
        
        <input 
          placeholder="Site da empresa (opcional)"
          value={formData.websiteUrl}
          onChange={(e) => setFormData({...formData, websiteUrl: e.target.value})}
        />
      </form>
      
      <div className="modal-actions">
        <button onClick={onClose}>Cancelar</button>
        <button onClick={handleSubmit} className="primary">
          Treinar/Concluir
        </button>
      </div>
    </Modal>
  );
};
```

## üîÑ Fluxo Simplificado

1. **Usu√°rio clica "Treinar IA"** na tela Minhas Conex√µes
2. **Modal simples abre** com formul√°rio b√°sico
3. **Usu√°rio preenche** informa√ß√µes da empresa
4. **Clica "Treinar/Concluir"**
5. **Sistema salva dados** e ativa PEPE automaticamente
6. **Modal fecha** com notifica√ß√£o de sucesso
7. **PEPE est√° ativo** e pronto para atender

## üéØ Estado do Bot√£o Ap√≥s Treinamento

### Antes do Treinamento
```
[üéì Treinar IA]
```

### Ap√≥s o Treinamento
```
[‚úÖ IA Ativa] ou [üìù Editar Treinamento]
```

---

**Esta √© a especifica√ß√£o final simplificada. O foco √© na simplicidade e facilidade de uso, sem configura√ß√µes complexas.**